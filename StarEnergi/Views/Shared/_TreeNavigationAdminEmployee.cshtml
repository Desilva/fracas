@using StarEnergi
@model IEnumerable<StarEnergi.Models.plant>
<script type="text/javascript">
    function onSelectTreeEmployee(e) {
        var treeview = $('#TreeSBSEmployee').data('tTreeView');
        var value = treeview.getItemValue(e.item).split(';');
        if (value[0] == 'DEPARTMENT') {
            //$('#content').load('foc/Create', { 'id': value[1]} );
            $('#content').load('EmployeeDept/Details/' + value[1]);
        } else if (value[0] == 'EMPLOYEEBOSS') {
            $('#content').load('EmployeeBoss/Details/' + value[1]);
        } else if (value[0] == 'EMPLOYEE') {
            $('#content').load('Employee/Details/' + value[1]);
        } else {

        }
}
</script>
@(
    Html.Telerik().TreeView()
        .Name("TreeSBSEmployee")
        .BindTo(Model, mappings =>
        {
            mappings.For<StarEnergi.Models.plant>(binding => binding
                    .ItemDataBound((item, plant) =>
                    {
                        item.Text = "Employee " + plant.nama;
                        item.Value = Config.TreeType.PLANT + ";" + plant.id.ToString();
                        item.Expanded = true;
                        if (plant.focs.Count != 0)
                        {
                            item.ImageUrl = ("~/Content/image/folder.png");
                        }
                        else
                            item.ImageUrl = ("~/Content/image/file.png");
                    })
                    .Children(plant => plant.employee_dept));
            mappings.For<StarEnergi.Models.employee_dept>(binding => binding
                    .ItemDataBound((item, dept) =>
                    {
                        item.Text = dept.dept_name;
                        item.Value = "DEPARTMENT" + ";" + dept.id.ToString();
                        if (dept.employees.Count != 0) {
                            item.ImageUrl = ("~/Content/image/folder.png");
                        }else
                            item.ImageUrl = ("~/Content/image/file.png");
                    })
                    .Children(dept => dept.employees));
            mappings.For<StarEnergi.Models.employee>(binding => binding
                    .ItemDataBound((item, employee) =>
                    {
                        item.Text = employee.alpha_name;
                        item.Value = (employee.employee_boss == null ? "EMPLOYEEBOSS" : "EMPLOYEE") + ";" + employee.id.ToString();
                        if (employee.employee1.Count != 0)
                        {
                            item.ImageUrl = ("~/Content/image/folder.png");
                        }
                        else
                            item.ImageUrl = ("~/Content/image/file.png");

                    })
                    .Children(employee => employee.employee1));
        })
        .ClientEvents(eventsTree =>
                   eventsTree.OnSelect("onSelectTreeEmployee")
                  .OnLoad("onLoadEmployee")
        )
   )
<div class="borderTree"></div>
